<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ“š Metabuscador de Pliegos</h1>
      <p class="subtitle">Literatura popular espaÃ±ola</p>
    </header>

    <main>
      <!-- Campo de bÃºsqueda -->
      <div class="search-box">
        <input
          type="text"
          id="query"
          placeholder="romances, autor, lugar..."
          autofocus>
        <button id="searchBtn">ğŸ” Buscar</button>
      </div>

      <!-- Opciones de bÃºsqueda -->
      <div class="options">
        <h4>Opciones de bÃºsqueda:</h4>

        <!-- Modo de apertura -->
        <div class="option-group">
          <label class="option-label">
            <input type="radio" name="mode" value="tabs" checked>
            <span>PestaÃ±as nuevas (ventana actual)</span>
          </label>
          <label class="option-label">
            <input type="radio" name="mode" value="window">
            <span>Ventana nueva</span>
          </label>
        </div>

        <!-- Control de paginaciÃ³n -->
        <div class="option-group pagination-control">
          <label class="option-label-full">
            <input type="checkbox" id="enablePagination">
            <span>ğŸ“„ Obtener mÃºltiples pÃ¡ginas de resultados</span>
          </label>

          <div id="paginationSettings" class="pagination-settings" style="display: none;">
            <label class="pages-label">
              PÃ¡ginas por fuente:
              <select id="pagesPerSource">
                <option value="1">1 pÃ¡gina</option>
                <option value="2" selected>2 pÃ¡ginas</option>
                <option value="3">3 pÃ¡ginas</option>
                <option value="5">5 pÃ¡ginas</option>
              </select>
            </label>
          </div>
        </div>

        <!-- Modo con scraping -->
        <div class="option-group">
          <label class="option-label-full">
            <input type="checkbox" id="enableScraping">
            <span>ğŸ” Mostrar resumen unificado de resultados</span>
          </label>
          <p class="option-hint">Extrae y muestra todos los resultados en un resumen</p>
        </div>
      </div>

      <!-- SelecciÃ³n de fuentes -->
      <div class="sources">
        <h3>Fuentes a consultar:</h3>
        
        <label class="source-item">
          <input type="checkbox" value="bne" checked>
          <span class="source-name" style="color: #722ed1;">ğŸ“– BNE Digital</span>
        </label>

        <label class="source-item">
          <input type="checkbox" value="cordel" checked>
          <span class="source-name" style="color: #e85d75;">ğŸ“œ Desenrollando el cordel</span>
        </label>

        <label class="source-item">
          <input type="checkbox" value="mapping" checked>
          <span class="source-name" style="color: #52c41a;">ğŸ—ºï¸ Mapping Pliegos (CSIC)</span>
        </label>

        <label class="source-item">
          <input type="checkbox" value="aracne" checked>
          <span class="source-name" style="color: #4a90e2;">ğŸ•¸ï¸ Red-aracne (BIDISO)</span>
        </label>

        <label class="source-item">
          <input type="checkbox" value="funjdiaz">
          <span class="source-name" style="color: #faad14;">ğŸµ FundaciÃ³n JoaquÃ­n DÃ­az</span>
        </label>
      </div>

      <!-- Controles rÃ¡pidos -->
      <div class="quick-controls">
        <button class="btn-secondary" id="selectAll">âœ“ Todas</button>
        <button class="btn-secondary" id="selectNone">âœ— Ninguna</button>
      </div>

      <!-- BÃºsquedas rÃ¡pidas -->
      <div class="quick-searches">
        <h4>âš¡ BÃºsquedas rÃ¡pidas:</h4>
        <div class="quick-btns">
          <button class="quick-btn" data-query="romances">romances</button>
          <button class="quick-btn" data-query="cautivos">cautivos</button>
          <button class="quick-btn" data-query="Barcelona">Barcelona</button>
          <button class="quick-btn" data-query="monja">monja</button>
          <button class="quick-btn" data-query="Diego Corrientes">Diego Corrientes</button>
          <button class="quick-btn" data-query="muerte">muerte</button>
        </div>
      </div>

      <!-- Estado -->
      <div id="status" class="status"></div>

      <!-- Resumen de resultados (scraping) -->
      <div id="resumenResultados" class="resumen-resultados" style="display: none;">
        <h3>ğŸ“Š Resumen de resultados</h3>
        <div id="resumenContenido"></div>
        <div class="resumen-actions">
          <button id="exportarTXT" class="btn-primary">ğŸ’¾ Exportar TXT</button>
          <button id="cerrarResumen" class="btn-secondary">Cerrar resumen</button>
        </div>
      </div>
    </main>

    <footer>
      <p>ğŸ’¡ <strong>Atajo:</strong> Ctrl+Shift+P (Cmd+Shift+P en Mac)</p>
      <p>âœ¨ VersiÃ³n 2.0 - Con paginaciÃ³n y scraping</p>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>
